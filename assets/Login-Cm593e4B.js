import{_ as S,n as a,c as n,a as e,w,v as I,x as b,t as r,i as h,M as V,O as C,j as M,C as P,e as T,J as D,o as u,f as E,D as L,E as N,P as U,m as B,A as j}from"./index-CgsUNcZw.js";const A="/assets/login-ill-X1PEEfkn.svg",i=d=>(L("data-v-dbd6db76"),d=d(),N(),d),O={class:"container login"},R=i(()=>e("img",{class:"login__img",src:A,alt:"login_img"},null,-1)),z=i(()=>e("h2",null,"Авторизация",-1)),F={class:"login__form-input"},J=i(()=>e("label",{for:"login__input"},"Логин:",-1)),X={key:0,class:"error-message"},$={class:"login__form-input"},q=i(()=>e("label",{for:"password__input"},"Пароль:",-1)),G=["type"],H={key:0,class:"error-message"},K={class:"checkbox"},Q=i(()=>e("label",{for:"showPassword"},"Показать пароль",-1)),W=["disabled"],Y={key:0,class:"error-message"},Z={key:1,class:"success-message"},ee={__name:"Login",setup(d){const g=a(!1),c=a(""),_=a(""),s=a({}),p=a(null),v=a(null),m=a(!1),k=U(),y=()=>(s.value={},c.value.trim()||(s.value.username="Введите логин"),_.value.trim()||(s.value.password="Введите пароль"),Object.keys(s.value).length===0),x=async()=>{var f,o;if(p.value=null,v.value=null,!!y())try{m.value=!0;const t=await B.post(`${j}/auth/login`,{username:c.value,password:_.value});v.value="Успешный вход!",localStorage.setItem("authToken",t.data.token),localStorage.setItem("tokenTimestamp",Date.now()),setTimeout(()=>{k.push("/ru/admin")},1e3)}catch(t){p.value=((o=(f=t.response)==null?void 0:f.data)==null?void 0:o.error)||"Ошибка авторизации"}finally{m.value=!1}};return(f,o)=>{const t=D("router-link");return u(),n("div",O,[R,e("form",{class:"login__form",onSubmit:T(x,["prevent"])},[z,e("div",F,[J,w(e("input",{type:"text",id:"login__input","onUpdate:modelValue":o[0]||(o[0]=l=>c.value=l),placeholder:"Введите логин",class:b({"input-error":s.value.username})},null,2),[[I,c.value]]),s.value.username?(u(),n("p",X,r(s.value.username),1)):h("",!0)]),e("div",$,[q,w(e("input",{autocomplete:"on",type:g.value?"text":"password",id:"password__input","onUpdate:modelValue":o[1]||(o[1]=l=>_.value=l),placeholder:"Введите пароль",class:b({"input-error":s.value.password})},null,10,G),[[V,_.value]]),s.value.password?(u(),n("p",H,r(s.value.password),1)):h("",!0),e("div",K,[w(e("input",{type:"checkbox",id:"showPassword","onUpdate:modelValue":o[2]||(o[2]=l=>g.value=l)},null,512),[[C,g.value]]),Q])]),e("button",{type:"submit",disabled:m.value},r(m.value?"Вход...":"Войти"),9,W),p.value?(u(),n("p",Y,r(p.value),1)):h("",!0),v.value?(u(),n("p",Z,r(v.value),1)):h("",!0),M(t,{class:"backToMain",to:"/ru"},{default:P(()=>[E("Вернуться на главную")]),_:1})],32)])}}},oe=S(ee,[["__scopeId","data-v-dbd6db76"]]);export{oe as default};
