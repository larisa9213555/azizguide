import{d as B,m as S,A as z,_ as L,o as t,c as o,a as e,F as v,s as y,n as k,p as b,t as n,f as p,i as m,w as P,h as I,k as C,x as q,j as $,C as R,J as j,u as w,G as N,H,B as D,q as x,K as V,l as A}from"./index-CgsUNcZw.js";import{_ as O}from"./TourModal-D3tT8bAf.js";const F=B("dynamic",()=>({fetchTour:async(h,a)=>{try{return(await S.get(`${z}/tours/${h}/${a}`)).data}catch(l){throw console.error("Ошибка запроса:",l.response||l.message),l}}})),E={},G={class:"skeleton-parent"},J=e("div",{class:"skeleton skeleton-header"},null,-1),K=e("div",{class:"skeleton skeleton-title"},null,-1),U=e("div",{class:"skeleton skeleton-paragraph"},null,-1),Q={class:"skeleton-images"};function W(s,h){return t(),o("div",G,[J,K,U,e("div",Q,[(t(),o(v,null,y(3,a=>e("div",{class:"skeleton skeleton-image",key:a})),64))])])}const X=L(E,[["render",W]]),Y={class:"tour__header"},Z=["src"],tt={__name:"TourHeader",props:{tour:{type:Object,required:!0}},setup(s){return(h,a)=>(t(),o("header",Y,[e("img",{loading:"lazy",src:s.tour.tour_headerPoster,alt:"tour-main-img"},null,8,Z)]))}},et={class:"main__tourTitle tour__container"},ot={class:"tour__main-subtitle"},st={key:0},nt=["innerHTML"],rt={class:"tour__images"},ut=["alt","onClick"],at={key:0,class:"main__title"},lt={class:"main__text18"},it={class:"main__tourDays tour__container"},ct={class:"day_text"},_t={key:0},dt={class:"main__text16"},mt=["innerHTML"],ht={key:1},vt={key:2},yt={key:1,class:"tour__attention tour__container"},ft=["innerHTML"],$t={__name:"TourDetails",props:{tour:{type:Object,required:!0}},setup(s){const h=s,a=k(!1),l=k({index:0,type:"top"}),f=b(()=>l.value.type==="top"?h.tour.tour_imagesTop||[]:[]),i=(r,_)=>{l.value={index:r,type:_},a.value=!0},c=()=>{a.value=!1};return(r,_)=>{const g=C("lazy");return t(),o(v,null,[e("section",et,[e("h1",null,n(s.tour.title),1),e("p",ot,n(s.tour.tour__subtitle),1),s.tour.tour_duration?(t(),o("span",st,[p(n(r.$t("toursPage.duration"))+": ",1),e("span",null,n(s.tour.tour_duration),1)])):m("",!0),e("p",{class:"main__text18 mt48",innerHTML:s.tour.tour_descr},null,8,nt)]),e("div",rt,[(t(!0),o(v,null,y(s.tour.tour_imagesTop,(d,u)=>P((t(),o("img",{key:u,alt:d.alt,onClick:T=>i(u,"top")},null,8,ut)),[[g,d.src]])),128))]),s.tour.tour_days?(t(),o("h2",at,n(r.$t("toursPage.itinerary")),1)):m("",!0),e("p",lt,n(s.tour.excursion_introText),1),e("section",it,[(t(!0),o(v,null,y(s.tour.tour_days,d=>(t(),o("div",{class:"main__tourDays-day",key:d.day_number},[e("h3",null,n(d.day_number),1),e("h3",ct,n(d.day_text),1),d.tour_duration?(t(),o("span",_t,[p(n(r.$t("toursPage.duration"))+": ",1),e("span",null,n(d.tour_duration),1)])):m("",!0),e("span",dt,n(d.city_of_day),1),e("div",null,[(t(!0),o(v,null,y(d.parts_of_day,(u,T)=>(t(),o("div",{class:"main__tourDays-day-info",key:T},[d.lastDay?(t(),o("h4",{key:0,innerHTML:u.title_of_part},null,8,mt)):(t(),o("h4",ht,[e("span",null,n(u.time_of_part),1),p(" "+n(u.title_of_part),1)])),u.events_of_part?(t(),o("ul",vt,[(t(!0),o(v,null,y(u.events_of_part,M=>(t(),o("li",{key:M},n(M),1))),128))])):m("",!0)]))),128))])]))),128))]),s.tour.tour__attention?(t(),o("div",yt,[e("h4",null,n(r.$t("toursPage.attention"))+"!",1),e("p",{innerHTML:s.tour.tour__attention},null,8,ft)])):m("",!0),a.value?(t(),I(O,{key:2,images:f.value,initialIndex:l.value.index,isModalOpen:a.value,onClose:c},null,8,["images","initialIndex","isModalOpen"])):m("",!0)],64)}}},kt={class:"tour__price"},pt={class:"main__title"},gt={class:"tour__price-info"},Tt=["innerHTML"],Mt={key:0,class:"tour__price-included"},xt={key:1,class:"tour__price-included"},bt={key:2},It={key:3},Lt={class:"tour__images"},Pt=["alt","onClick"],Ct={__name:"TourPrice",props:{tour:{type:Object,required:!0}},setup(s){const h=s,a=k(!1),l=k({index:0,type:"bottom"}),f=b(()=>l.value.type==="bottom"?h.tour.tour_imagesBott||[]:[]),i=(r,_)=>{l.value={index:r,type:_},a.value=!0},c=()=>{a.value=!1};return(r,_)=>{const g=j("router-link"),d=C("lazy");return t(),o(v,null,[e("section",kt,[e("h2",pt,n(r.$t("toursPage.price")),1),e("div",gt,[(t(!0),o(v,null,y(s.tour.tour_price,u=>(t(),o("p",{key:u,innerHTML:u,class:q({tac:s.tour.tour_price.tour_price_item1})},null,10,Tt))),128)),e("div",null,[s.tour.tour_included?(t(),o("p",Mt,[e("span",null,n(r.$t("toursPage.includes"))+":",1),p(n(s.tour.tour_included),1)])):m("",!0),s.tour.tour_not_included?(t(),o("p",xt,[e("span",null,n(r.$t("toursPage.excludes"))+":",1),p(n(s.tour.tour_not_included),1)])):m("",!0),s.tour.tour_included_list?(t(),o("div",bt,[e("h4",null,n(r.$t("toursPage.includes"))+":",1),e("ul",null,[(t(!0),o(v,null,y(s.tour.tour_included_list,u=>(t(),o("li",{key:u},n(u),1))),128))])])):m("",!0),s.tour.tour_not_included_list?(t(),o("div",It,[e("h4",null,n(r.$t("toursPage.excludes"))+":",1),e("ul",null,[(t(!0),o(v,null,y(s.tour.tour_not_included_list,u=>(t(),o("li",{key:u},n(u),1))),128))])])):m("",!0)])]),$(g,{to:{path:"/application",query:{selectedTour:s.tour.title}},exact:"",class:"main__btn main__btn--orrange"},{default:R(()=>[p(n(r.$t("toursPage.button")),1)]),_:1},8,["to"])]),e("div",Lt,[(t(!0),o(v,null,y(s.tour.tour_imagesBott,(u,T)=>P((t(),o("img",{key:T,alt:u.alt,onClick:M=>i(T,"bottom")},null,8,Pt)),[[d,u.src]])),128))]),a.value?(t(),I(O,{key:0,images:f.value,initialIndex:l.value.index,isModalOpen:a.value,onClose:c},null,8,["images","initialIndex","isModalOpen"])):m("",!0)],64)}}},wt={class:"rec"},Ht={class:"main__title"},Dt={class:"rec__content"},Ot={__name:"Recomendation",setup(s){const{locale:h,messages:a}=w(),l=N(),f=b(()=>l.toursList),i=()=>[...f.value].sort(()=>.5-Math.random()).slice(0,3),c=k([]);H(async()=>{await l.fetchTours(),c.value=i()});const r=D();return x(()=>r.params.id,()=>{c.value=i()}),x(h,()=>{l.fetchTours(),c.value=i()}),(_,g)=>(t(),o("section",wt,[e("h2",Ht,n(_.$t("recomendation.title")),1),e("div",Dt,[$(V,{array:c.value},null,8,["array"])])]))}},Bt=L(Ot,[["__scopeId","data-v-92b6d74f"]]),St={class:"tourpage"},zt={key:1},qt={class:"tour__main"},Nt={__name:"TourPage",setup(s){const{locale:h}=w(),a=D(),l=F(),{fetchTour:f}=l,i=k(null),c=k(!1);window.scrollTo(0,0);const r=async()=>{c.value=!0;try{const _=await f(h.value,parseInt(a.params.id));i.value=_}catch(_){console.error("Ошибка загрузки тура:",_),i.value=null}finally{c.value=!1}};return H(r),x([()=>a.params.id,h],r),(_,g)=>(t(),o("div",St,[c.value?(t(),I(X,{key:0})):m("",!0),i.value&&!c.value?(t(),o("div",zt,[$(tt,{tour:i.value},null,8,["tour"]),e("main",qt,[$($t,{tour:i.value},null,8,["tour"]),$(Ct,{tour:i.value},null,8,["tour"]),$(Bt)]),$(A)])):m("",!0)]))}};export{Nt as default};
