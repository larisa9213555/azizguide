import{d as _,_ as b,u as w,r as h,c as y,a as e,t as r,w as i,b as R,e as $,v as p,f as T,g as A,h as k,i as S,j as V,F as E,k as D,o as v,l as L,m as C,A as I}from"./index-CgsUNcZw.js";import{P as N}from"./Popup-Q5DqiCJL.js";const O=_("telegram",{state:()=>({TELEGRAM_TOKEN:"8173145553:AAFSfLgn2Y7UzXmdQjZr5ROayCZkVHuLZAE",CHAT_ID:"971193945"}),actions:{async sendToTelegram(g,d,c,u){const o=`
📩 <b>Новый отзыв:</b>

👤 <b>Имя:</b> ${g}

📧 <b>Email:</b> ${d}

📝 <b>Текст:</b> ${c}


📝 <b>Номер:</b> ${u}


🔗 <a href="https://azizguide.uz/admin">Ссылка для проверки</a>
      `;try{const n=await fetch(`https://api.telegram.org/bot${this.TELEGRAM_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:o.trim(),parse_mode:"HTML"})});if(!n.ok){const f=await n.json();console.error("Ошибка ответа от Telegram API:",f)}}catch(n){console.error("Ошибка отправки в Telegram:",n),alert("Не удалось отправить сообщение.")}}}}),P="/assets/review-form-img-CA1TS7ku.jpg",U={class:"rev"},j={class:"main__text16"},z={class:"rev__content"},M={alt:"with_tourists"},B={class:"custom-input"},F=["placeholder"],H={class:"custom-input"},Z=["placeholder"],q={class:"custom-input"},G=["placeholder"],K={class:"custom-input"},x=["placeholder"],J={class:"message__input"},Q=["placeholder"],X=["alt"],Y={__name:"ReviewPage",setup(g){const{t:d,locale:c}=w(),u=O(),s=h({name:"",email:"",phone:"",date:"",message:""}),o=h({visible:!1,message:"",type:"success"}),n=async()=>{var t,a;try{const m={name:s.name,email:s.email,phone:s.phone,text:s.message,date:s.date,createdAt:new Date().toISOString(),language:c.value,userAgent:navigator.userAgent},l=await C.post(`${I}/reviews/`,m);o.message=d("formReview.popup.success"),o.type="success",o.visible=!0,setTimeout(()=>{o.visible=!1},3e3),Object.assign(s,{name:"",email:"",phone:"",date:"",message:""})}catch(m){o.message=((a=(t=m.response)==null?void 0:t.data)==null?void 0:a.message)||d("formReview.popup.error"),o.type="error",o.visible=!0}},f=async()=>{try{await u.sendToTelegram(s.name,s.email,s.message,s.phone)}catch(t){console.error("Ошибка отправки в Telegram:",t)}};return(t,a)=>{const m=D("lazy");return v(),y(E,null,[e("main",U,[e("h1",null,r(t.$t("formReview.title")),1),e("p",j,r(t.$t("formReview.description")),1),e("div",z,[i(e("img",M,null,512),[[m,R(P)]]),e("form",{onSubmit:$(n,["prevent"])},[e("div",null,[e("label",B,[e("span",null,r(t.$t("formReview.form.fields.name.label")),1),i(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>s.name=l),type:"text",placeholder:t.$t("formReview.form.fields.name.placeholder"),required:""},null,8,F),[[p,s.name]])]),e("label",H,[e("span",null,r(t.$t("formReview.form.fields.email.label")),1),i(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>s.email=l),type:"text",placeholder:t.$t("formReview.form.fields.email.placeholder")},null,8,Z),[[p,s.email]])])]),e("div",null,[e("label",q,[e("span",null,r(t.$t("formReview.form.fields.phone.label")),1),i(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>s.phone=l),type:"text",placeholder:t.$t("formReview.form.fields.phone.placeholder")},null,8,G),[[p,s.phone]])]),e("label",K,[e("span",null,r(t.$t("formReview.form.fields.date.label")),1),i(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>s.date=l),type:"text",placeholder:t.$t("formReview.form.fields.date.placeholder")},null,8,x),[[p,s.date]])])]),e("label",J,[e("span",null,r(t.$t("formReview.form.fields.message.label")),1),i(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=l=>s.message=l),placeholder:t.$t("formReview.form.fields.message.placeholder"),required:""},null,8,Q),[[p,s.message]])]),e("button",{class:"main__btn",type:"submit",onClick:f},[T(r(t.$t("formReview.form.button.text"))+" ",1),e("img",{src:A,alt:t.$t("formReview.form.button.iconAlt")},null,8,X)])],32)]),o.visible?(v(),k(N,{key:0,message:o.message,type:o.type},null,8,["message","type"])):S("",!0)]),V(L)],64)}}},se=b(Y,[["__scopeId","data-v-353e8c4c"]]);export{se as default};
